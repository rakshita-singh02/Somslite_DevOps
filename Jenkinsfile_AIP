pipeline {
    environment {
		PROJECT_ID = "sd-devops"
		APP_NAME = "sample-java-app"
		CLUSTER_NAME = "cluster-1"
		CLUSTER_ZONE = "us-central1-a"
		CREDENTIALS_ID = "sd-devops"
		GRADLE_TASK = "compileJava"
		
  	} 
	//agent any 2
  agent {
    kubernetes {
      label 'SpringBootRestApp'
      defaultContainer 'jnlp'
      yaml """
apiVersion: v1
kind: Pod
metadata:
labels:
  component: ci
spec:
  containers:
  - name: imbjava
    image: ibmcom/ibmjava:jre-alpine
    command:
    - cat
    tty: true
"""
}
	}
  
    stages {
			/* stage('check_gradle_version') {
				steps {
                                       echo 'gradle version'
			}
			*/
			stage('Unit Test') {
				steps {
					container('ibmjava') {
						withMaven(maven: 'MAVEN-3.6.3') {
							echo 'unit test'
						}
					}
				}
			}
		
		
}
}
